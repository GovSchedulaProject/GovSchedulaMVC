@model GovSchedulaWeb.Models.ViewModels.LiveQueueViewModel
@{
    ViewData["Title"] = "Live Queue";
}

@section Styles {
    <style>
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .kpi-card { background-color: #f9fafb; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; text-align: center; }
        .kpi-card h3 { font-size: 3rem; font-weight: 700; color: #003366; }
        .kpi-card p { font-size: 1rem; font-weight: 500; color: #374151; margin-top: 0.5rem; }
        .table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; }
        .table th, .table td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid #e5e7eb; }
        .table th { background-color: #f9fafb; font-weight: 600; }
        .btn-action { background-color: #003366; color: white; padding: 0.4rem 0.8rem; border: none; border-radius: 0.375rem; text-decoration: none; font-size: 0.875rem; cursor: pointer; }
        .btn-complete { background-color: #059669; }
    </style>
}

<div class="container" style="max-width: 1024px; margin-left: auto; margin-right: auto; padding: 2rem 1rem;">
    <div style="display: flex; justify-content: space-between; align-items: baseline;">
        <h1 class="heroTitle" style="font-size: 2.25rem; color: #111827;">Admin Dashboard</h1>
        <span style="font-size: 1rem; color: #4b5563;">@Model.CurrentDate</span>
    </div>

    <div class="kpi-grid">
        <div class="kpi-card">
            <h3>@Model.WaitingCount</h3>
            <p>Citizens Waiting</p>
        </div>
        <div class="kpi-card">
            <h3 style="font-size: 2.5rem; padding-top: 0.5rem;">@Model.AverageWaitTime</h3>
            <p>Avg. Wait Time</p>
        </div>
        <div class="kpi-card">
            <h3>@Model.CurrentlyServing</h3>
            <p>Currently Serving</p>
        </div>
    </div>

    <h2 style="font-size: 1.5rem; font-weight: 600; margin-top: 2.5rem;">Live Queue</h2>
    <table class="table">
        <thead>
            <tr>
                <th>TOKEN</th>
                <th>SERVICE</th>
                <th>STATUS</th>
                <th>CHECKED IN</th>
                <th>ACTIONS</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.LiveQueue)
            {
                <tr>
                    <td>@item.LiveQueueToken</td>
                    <td>@item.ServiceName</td>
                    <td><span style="background-color: #fef3c7; color: #92400e; padding: 0.25rem 0.5rem; border-radius: 99px;">@item.Status</span></td>
                    <td>@item.CheckedInTime</td>
                    <td>
                        <button class="btn-action">Call Next</button>
                        <button class="btn-action btn-complete">Complete</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>